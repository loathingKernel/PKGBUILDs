From 73c6c861a1ee0e1593105208b1ab26b530337229 Mon Sep 17 00:00:00 2001
From: Stelios Tsampas <loathingkernel@gmail.com>
Date: Sat, 26 Apr 2025 20:41:38 +0300
Subject: [PATCH] build: apply debug flags

"The Finals" fails to launch when these are omitted. I am unsure
which one it is but it doesn't matter, just follow upstream Proton
flags and add the strip flag afterwards.
---
 Makefile.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/Makefile.in b/Makefile.in
index 99ee8752..5f1f9611 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -58,7 +58,7 @@ CFLAGS         ?= -O2 -march=nocona -mtune=core-avx2
 OPTIMIZE_FLAGS := $(CFLAGS) -mno-avx512f -mfpmath=sse
 SANITY_FLAGS   := -fwrapv -fno-strict-aliasing
 DEBUG_FLAGS    := -ggdb -ffunction-sections -fdata-sections -fno-omit-frame-pointer
-COMMON_FLAGS    = -s $(OPTIMIZE_FLAGS) $(SANITY_FLAGS) -ffile-prefix-map=$(CCACHE_BASEDIR)=.
+COMMON_FLAGS    = $(DEBUG_FLAGS) -s $(OPTIMIZE_FLAGS) $(SANITY_FLAGS) -ffile-prefix-map=$(CCACHE_BASEDIR)=.
 COMMON_FLAGS32 := -mstackrealign
 COMMON_FLAGS64 := -mcmodel=small
 CARGO_BUILD_ARGS += --release
-- 
2.49.0

